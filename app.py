# ... (å‰é¢çš„ä»£ç ä¿æŒä¸å˜)

# ==========================================
# å…³é”®ä¿®æ”¹ï¼šå¡«å……æè´¨é€‰æ‹©
# ==========================================
st.markdown("---")
st.header("ğŸ§± å¡«å……æè´¨ (è§£å†³å°¾éƒ¨ç©ºæ ¼é—®é¢˜)")

# å¼ºåˆ¶ä½¿ç”¨ Null Byteï¼Œè¿™æ˜¯æœ€æ¥è¿‘çœŸé©¾ç…§ä¸”ä¸å¯è§çš„å¡«å……
pad_char_type = st.radio(
    "é€‰æ‹©å¡«å……å­—ç¬¦ (å»ºè®®é€‰ Null ä»¥éšè—å°¾éƒ¨æ•°æ®):",
    ("Null Byte (\\x00) - æ¨è", "Space (ç©ºæ ¼) - ä¼šæ˜¾ç¤ºç©ºç™½", "Zero ('0') - ä¼šæ˜¾ç¤º0"),
    index=0
)

# ç¡®å®šå¡«å……å­—ç¬¦
if "Null" in pad_char_type:
    fill_char = "\x00"
elif "Space" in pad_char_type:
    fill_char = " "
else:
    fill_char = "0"

# ... (ä¸­é—´ä»£ç ä¿æŒä¸å˜)

# ==========================================
# ç”Ÿæˆé€»è¾‘ä¿®æ”¹
# ==========================================
# 1. å¤´éƒ¨ï¼šä½¿ç”¨æ ‡å‡†å¤´éƒ¨ (ä¸å†éœ€è¦ç‰¹æ´›ä¼Šæœ¨é©¬æ¬ºéª—ï¼Œå› ä¸º Null åœ¨ Byte Mode ä¸‹ä¹Ÿèƒ½ç”Ÿæˆçº¹ç†)
#    æ³¨æ„ï¼šçœŸé©¾ç…§é€šå¸¸å°±ç”¨æ ‡å‡†å¤´éƒ¨ \x1e
header = "@\x0a\x1e\x0dANSI 636031080102"

# 2. ç»„åˆæœ‰æ•ˆæ•°æ®
valid_payload = header + des_dl + des_zw + subfile_dl_final + subfile_zw

# 3. æ³¨å…¥å¡«å……
# è®¡ç®—éœ€è¦å¡«å……å¤šå°‘ä¸ªå­—ç¬¦æ‰èƒ½æ’‘èµ·çº¹ç†
padding_str = fill_char * padding_amount

final_data_to_encode = valid_payload + padding_str

# 4. ç¼–ç 
# ...
